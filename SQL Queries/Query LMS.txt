CREATE TABLE [dbo].[USER] (
    [USERNAME]   VARCHAR (25) NOT NULL,
    [PASSWORD]   VARCHAR (45) NOT NULL,
    [PERMISSION] VARCHAR (45) CONSTRAINT [DF_USER_PERMISSION] DEFAULT ('LIB_USER') NOT NULL,
    CONSTRAINT [PK_USER] PRIMARY KEY CLUSTERED ([USERNAME] ASC)
);

CREATE TABLE [dbo].[BOOK] (
    [ID]          INT             NOT NULL,
    [ISBN]        VARCHAR (10)    NOT NULL,
    [TITLE]       VARCHAR (50)    NOT NULL,
    [PRICE]       DECIMAL (10, 2) NOT NULL,
    [DESCRIPTION] VARCHAR (250)   NOT NULL,
    [TYPE]        VARCHAR (10)    NOT NULL,
    [PUBLISHER]   VARCHAR (50)    NOT NULL,
    [AUTHOR]      VARCHAR (50)    NOT NULL,
    [CATEGORY]    VARCHAR (100)   NOT NULL,
    CONSTRAINT [PK_BOOK] PRIMARY KEY CLUSTERED ([ID] ASC)
);


CREATE TABLE [dbo].[MEMBER] (
    [ID]     INT             NOT NULL,
    [NAME]   VARCHAR (50)    NOT NULL,
    [FINE]   DECIMAL (10, 2) CONSTRAINT [DF_MEMBER_FINE] DEFAULT ((0.00)) NOT NULL,
    [EXPIRY] DATE            NOT NULL,
    CONSTRAINT [PK_MEMBER] PRIMARY KEY CLUSTERED ([ID] ASC)
);


CREATE TABLE [dbo].[COUNT] (
    [ID]            INT NOT NULL,
    [BOOK_ID]       INT NOT NULL,
    [TOTAL_COUNT]   INT NOT NULL,
    [CURRENT_COUNT] INT NOT NULL,
    CONSTRAINT [PK_COUNT] PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [FK_COUNT_BOOK] FOREIGN KEY ([BOOK_ID]) REFERENCES [dbo].[BOOK] ([ID])
);


CREATE TABLE [dbo].[ISSUE] (
    [ID]          INT           NOT NULL,
    [BOOK_ID]     INT           NOT NULL,
    [MEMBER_ID]   INT           NOT NULL,
    [ISSUE_DATE]  DATE          NOT NULL,
    [RETURN_DATE] DATE          NOT NULL,
    [ISSUED_BY]   VARCHAR (25)  NOT NULL,
    [COMMENT]     VARCHAR (200) NULL,
    CONSTRAINT [PK_ISSUE] PRIMARY KEY CLUSTERED ([ID] ASC),
    CONSTRAINT [FK_ISSUE_BOOK] FOREIGN KEY ([BOOK_ID]) REFERENCES [dbo].[BOOK] ([ID]),
    CONSTRAINT [FK_ISSUE_MEMBER] FOREIGN KEY ([MEMBER_ID]) REFERENCES [dbo].[MEMBER] ([ID])
);


INSERT INTO [dbo].[USER] ([USERNAME], [PASSWORD], [PERMISSION]) VALUES (N'ADMIN01', N'Admin123', N'ADMIN')
INSERT INTO [dbo].[USER] ([USERNAME], [PASSWORD], [PERMISSION]) VALUES (N'ADMIN02', N'Admin123', N'ADMIN')
INSERT INTO [dbo].[USER] ([USERNAME], [PASSWORD], [PERMISSION]) VALUES (N'LIBRARIAN01', N'Lib123', N'LIB_USER')
INSERT INTO [dbo].[USER] ([USERNAME], [PASSWORD], [PERMISSION]) VALUES (N'LIBRARIAN02', N'Lib123', N'LIB_USER')